<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>CispyUtils - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-cispy.html">cispy</a></li><li><a href="module-cispy_buffers.html">cispy/buffers</a></li><li><a href="module-cispy_channel.html">cispy/channel</a></li><li><a href="module-cispy_utils.html">cispy/utils</a></li></ul><h3>Namespaces</h3><ul><li><a href="module-cispy_buffers-Buffer.html">Buffer</a><ul class='methods'><li data-type='method'><a href="module-cispy_buffers-Buffer.html#remove">remove</a></li></ul></li><li><a href="module-cispy_buffers-DroppingBuffer.html">DroppingBuffer</a><ul class='methods'><li data-type='method'><a href="module-cispy_buffers-DroppingBuffer.html#add">add</a></li></ul></li><li><a href="module-cispy_buffers-FixedBuffer.html">FixedBuffer</a><ul class='methods'><li data-type='method'><a href="module-cispy_buffers-FixedBuffer.html#add">add</a></li></ul></li><li><a href="module-cispy_buffers-Queue.html">Queue</a><ul class='methods'><li data-type='method'><a href="module-cispy_buffers-Queue.html#dequeue">dequeue</a></li><li data-type='method'><a href="module-cispy_buffers-Queue.html#enqueue">enqueue</a></li><li data-type='method'><a href="module-cispy_buffers-Queue.html#filter">filter</a></li><li data-type='method'><a href="module-cispy_buffers-Queue.html#peek">peek</a></li></ul></li><li><a href="module-cispy_buffers-SlidingBuffer.html">SlidingBuffer</a><ul class='methods'><li data-type='method'><a href="module-cispy_buffers-SlidingBuffer.html#add">add</a></li></ul></li><li><a href="module-cispy_channel-Channel.html">Channel</a></li><li><a href="module-cispy_utils-CispyUtils.html">CispyUtils</a><ul class='methods'><li data-type='method'><a href="module-cispy_utils-CispyUtils.html#.debounce">debounce</a></li><li data-type='method'><a href="module-cispy_utils-CispyUtils.html#.map">map</a></li><li data-type='method'><a href="module-cispy_utils-CispyUtils.html#.partition">partition</a></li><li data-type='method'><a href="module-cispy_utils-CispyUtils.html#.pipe">pipe</a></li><li data-type='method'><a href="module-cispy_utils-CispyUtils.html#.reduce">reduce</a></li><li data-type='method'><a href="module-cispy_utils-CispyUtils.html#.split">split</a></li><li data-type='method'><a href="module-cispy_utils-CispyUtils.html#.tap">tap</a></li><li data-type='method'><a href="module-cispy_utils-CispyUtils.html#.throttle">throttle</a></li><li data-type='method'><a href="module-cispy_utils-CispyUtils.html#.untap">untap</a></li><li data-type='method'><a href="module-cispy_utils-CispyUtils.html#.untapAll">untapAll</a></li></ul></li><li><a href="module-cispy-Cispy.html">Cispy</a><ul class='methods'><li data-type='method'><a href="module-cispy-Cispy.html#.alts">alts</a></li><li data-type='method'><a href="module-cispy-Cispy.html#.altsAsync">altsAsync</a></li><li data-type='method'><a href="module-cispy-Cispy.html#.chan">chan</a></li><li data-type='method'><a href="module-cispy-Cispy.html#.close">close</a></li><li data-type='method'><a href="module-cispy-Cispy.html#.config">config</a></li><li data-type='method'><a href="module-cispy-Cispy.html#.droppingBuffer">droppingBuffer</a></li><li data-type='method'><a href="module-cispy-Cispy.html#.fixedBuffer">fixedBuffer</a></li><li data-type='method'><a href="module-cispy-Cispy.html#.go">go</a></li><li data-type='method'><a href="module-cispy-Cispy.html#.put">put</a></li><li data-type='method'><a href="module-cispy-Cispy.html#.putAsync">putAsync</a></li><li data-type='method'><a href="module-cispy-Cispy.html#.sleep">sleep</a></li><li data-type='method'><a href="module-cispy-Cispy.html#.slidingBuffer">slidingBuffer</a></li><li data-type='method'><a href="module-cispy-Cispy.html#.take">take</a></li><li data-type='method'><a href="module-cispy-Cispy.html#.takeOrThrow">takeOrThrow</a></li><li data-type='method'><a href="module-cispy-Cispy.html#.timeout">timeout</a></li></ul></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">CispyUtils</h1>
    

    




<section>

<header>
    
        <h2>
            <span class="ancestors"><a href="module-cispy_utils.html">cispy/utils</a>~</span>
        
        CispyUtils
        </h2>
        
    
</header>

<article>
    
        <div class="container-overview">
        
            

<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="modules_utils_index.js.html">modules/utils/index.js</a>, <a href="modules_utils_index.js.html#line32">line 32</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>




            
                <div class="description"><p>A set of utility functions using processes to work with channels.</p>
<p>These are all accessed through the <code>cispy.utils</code> namespace; e.g.,
<code><a href="module-cispy_utils-CispyUtils.html#.reduce">reduce</a></code> can be called like this:</p>
<pre class="prettyprint source"><code>const output = cispy.utils.reduce((acc, value) => acc + value, ch, 0);</code></pre></div>
            

            
        
        </div>
    

    

    

    

     

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    <h4 class="name" id=".debounce"><span class="type-signature">(static) </span>debounce<span class="signature">(src, buffer<span class="signature-attributes">opt</span>, delay, options<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {<a href="module-cispy_channel-Channel.html">module:cispy/channel~Channel</a>}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="modules_utils_timing.js.html">modules/utils/timing.js</a>, <a href="modules_utils_timing.js.html#line85">line 85</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p><strong>Debounces an input channel.</strong></p>
<p>Debouncing is the act of turning several input values into one. For example, debouncing a channel driven by a
<code>mousemove</code> event would cause only the final <code>mousemove</code> event to be put onto the channel, dropping all of the other
ones. This can be desirable because <code>mousemove</code> events come in bunches, being produced continually while the mouse is
moving, and often all that we really care about is to learn where the mouse ended up.</p>
<p>This function does this by controlling which values that have been put onto the source channel are made available on
the destination channel, and when.</p>
<p>The <code>delay</code> parameter determines the debounce threshold. Once the first value is put onto the source channel,
debouncing is in effect until the number of milliseconds in <code>delay</code> passes without any other value being put onto
that channel. In other words, the delay will be refreshed if another value is put onto the source channel before the
delay elapses. After a full delay interval passes without a value being placed on the source channel, the last value
put becomes available on the destination channel.</p>
<p>This behavior can be modified through four options: <code>leading</code>, <code>trailing</code>, <code>maxDelay</code>, and <code>cancel</code>.</p>
<p>If both <code>leading</code> and <code>trailing</code> are <code>true</code>, values will not be duplicated. The first value put onto the source
channel will be put onto the destination channel immediately (per <code>leading</code>) and the delay will begin, but a value
will only be made available on the destination channel at the end of the delay (per <code>trailing</code>) if <em>another</em> input
value was put onto the source channel before the delay expired.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>src</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="module-cispy_channel-Channel.html">module:cispy/channel~Channel</a></span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last"><p>The source channel.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>buffer</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>
|

<span class="param-type"><a href="module-cispy_buffers-Buffer.html">module:cispy/buffers~Buffer</a></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    <code>0</code>
                
                </td>
            

            <td class="description last"><p>A buffer used to create the destination channel. If
    this is a number, a <a href="module-cispy_buffers-FixedBuffer.html">FixedBuffer</a> of that size will be used. If this is
    <code>0</code> or not present, the channel will be unbuffered.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>delay</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last"><p>The debouncing delay, in milliseconds.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>options</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    <code>{}</code>
                
                </td>
            

            <td class="description last"><p>A set of options to further configure the debouncing.</p>
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>leading</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    <code>false</code>
                
                </td>
            

            <td class="description last"><p>Instead of making a value available on the destination channel after the
    delay passes, the first value put onto the source channel is made available <em>before</em> the delay begins. No value
    is available on the destination channel after the delay has elapsed (unless <code>trailing</code> is also <code>true</code>).</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>trailing</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    <code>true</code>
                
                </td>
            

            <td class="description last"><p>The default behavior, where a value is not made available on the destination
    channel until the entire delay passes without a new value being put on the source channel.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>maxDelay</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    <code>0</code>
                
                </td>
            

            <td class="description last"><p>The maximum delay allowed before a value is put onto the destination channel.
    Debouncing can, in theory, go on forever as long as new input values continue to be put onto the source channel
    before the delay expires. Setting this option to a positive number sets the maximum number of milliseconds that
    debouncing can go on before it's forced to end, even if in the middle of a debouncing delay. Having debouncing
    end through the max delay operates exactly as if it had ended because of lack of input; the last input is made
    available on the destination channel (if <code>trailing</code> is <code>true</code>), and the next input will trigger another debounce
    operation.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>cancel</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="module-cispy_channel-Channel.html">module:cispy/channel~Channel</a></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last"><p>A channel used to signal a cancellation of the
    debouncing. Any value put onto this channel will cancel the current debouncing operation, closing the output
    channel and discarding any values that were waiting for the debounce threshold timer to be sent to the output.</p></td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>














<h5>Returns:</h5>

        
<div class="param-desc">
    <p>The newly-created destination channel, where all of the values will be
    debounced from the source channel.</p>
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="module-cispy_channel-Channel.html">module:cispy/channel~Channel</a></span>


    </dd>
</dl>

    


        
            

    

    <h4 class="name" id=".map"><span class="type-signature">(static) </span>map<span class="signature">(fn, srcs, buffer<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {<a href="module-cispy_channel-Channel.html">module:cispy/channel~Channel</a>}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="modules_utils_flow.js.html">modules/utils/flow.js</a>, <a href="modules_utils_flow.js.html#line551">line 551</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p><strong>Maps the values from one or more source channels through a function, putting the results on a new channel.</strong></p>
<p>The mapping function is given one value from each source channel, after at least one value becomes available on every
source channel. The output value from the function is then put onto the destination channel.</p>
<p>The destination channel is created by the function based on the buffer value passed as the third parameter. If this
is missing, <code>null</code>, or <code>0</code>, the destination channel will be unbuffered. If it's a positive integer, the destination
channel is buffered by a fixed buffer of that size. If the parameter is a buffer, then that buffer is used to buffer
the destination channel.</p>
<p>Once <em>any</em> source channel is closed, the mapping ceases and the destination channel is also closed.</p>
<p>This is obviously similar to a map transducer, but unlike a transducer, this function works with multiple input
channels. This is something that a transducer on a single channel is unable to do.</p>
<pre class="prettyprint source"><code>const { go, chan, put, take, close, utils } = cispy;
const { map } = utils;

const input1 = chan();
const input2 = chan();
const input3 = chan();
const output = map((x, y, z) => x + y + z, [input1, input2, input3]);

go(async () => {
  await put(input1, 1);
  await put(input1, 2);
  await put(input1, 3);
});

go(async () => {
  await put(input2, 10);
  await put(input2, 20);
  close(input2);
});

go(async () => {
  await put(input3, 100);
  await put(input3, 200);
  await put(input3, 300);
});

go(async () => {
  console.log(await take(output));     // -> 111
  console.log(await take(output));     // -> 222
  // Output closes now because input2 closes after 2 values
  console.log(output.closed);          // -> true
});</code></pre>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>fn</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="module-cispy_utils.html#~mapper">module:cispy/utils~mapper</a></span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last"><p>The mapping function. This should have one parameter for each source
    channel and return a single value.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>srcs</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;<a href="module-cispy_channel-Channel.html">module:cispy/channel~Channel</a>></span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last"><p>The source channels.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>buffer</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>
|

<span class="param-type"><a href="module-cispy_buffers-Buffer.html">module:cispy/buffers~Buffer</a></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    <code>0</code>
                
                </td>
            

            <td class="description last"><p>A buffer used to create the destination channel. If
    this is a number, a <a href="module-cispy_buffers-FixedBuffer.html">module:cispy/buffers~FixedBuffer</a> of that size will be used. If this is <code>0</code> or
    not present, the channel will be unbuffered.</p></td>
        </tr>

    
    </tbody>
</table>














<h5>Returns:</h5>

        
<div class="param-desc">
    <p>The destination channel.</p>
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="module-cispy_channel-Channel.html">module:cispy/channel~Channel</a></span>


    </dd>
</dl>

    


        
            

    

    <h4 class="name" id=".partition"><span class="type-signature">(static) </span>partition<span class="signature">(fn, src, tBuffer<span class="signature-attributes">opt</span>, fBuffer<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {Array.&lt;module:cispy/core~Channel>}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="modules_utils_flow.js.html">modules/utils/flow.js</a>, <a href="modules_utils_flow.js.html#line164">line 164</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p><strong>Creates two new channels and routes values from a source channel to them according to a predicate function.</strong></p>
<p>The supplied function is invoked with every value that is put onto the source channel. Those that return <code>true</code> are
routed to the first destination channel; those that return <code>false</code> are routed to the second.</p>
<p>The new channels are created by the function based on the buffer values passed as the third and fourth parameters. If
one or both of these are missing, <code>null</code>, or <code>0</code>, the corresponding destination channel is unbuffered. If one is a
positive integer, the corresponding channel is buffered by a fixed buffer of that size. If the parameter for a
channel is a buffer, then that buffer is used to buffer the new channel.</p>
<p>Both new channels are closed when the source channel is closed.</p>
<pre class="prettyprint source"><code>const { go, chan, put, take, utils } = cispy;
const { partition } = utils;

const input = chan();
const [even, odd] = partition(x => x % 2 === 0, input);

go(async () => {
  await put(input, 1);
  await put(input, 2);
  await put(input, 3);
  await put(input, 4);
});

go(async () => {
  console.log(await take(even));     // -> 2
  console.log(await take(even));     // -> 4
});

go(async () => {
  console.log(await take(odd));      // -> 1
  console.log(await take(odd));      // -> 3
});</code></pre>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>fn</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="module-cispy_utils.html#~predicate">module:cispy/utils~predicate</a></span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last"><p>A predicate function used to test each value on the input channel.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>src</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="module-cispy_channel-Channel.html">module:cispy/channel~Channel</a></span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last"><p>The source channel.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>tBuffer</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>
|

<span class="param-type"><a href="module-cispy_buffers-Buffer.html">module:cispy/buffers~Buffer</a></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    <code>0</code>
                
                </td>
            

            <td class="description last"><p>A buffer used to create the destination channel which
    receives all values that passed the predicate. If this is a number, a
    <a href="module-cispy_buffers-FixedBuffer.html">module:cispy/buffers~FixedBuffer</a> of that size will be used. If this is <code>0</code> or not present, the
    channel will be unbuffered.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>fBuffer</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>
|

<span class="param-type"><a href="module-cispy_buffers-Buffer.html">module:cispy/buffers~Buffer</a></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    <code>0</code>
                
                </td>
            

            <td class="description last"><p>A buffer used to create the destination channel which
    receives all values that did not pass the predicate. If this is a number, a
    <a href="module-cispy_buffers-FixedBuffer.html">module:cispy/buffers~FixedBuffer</a> of that size will be used. If this is <code>0</code> or not present, the
    channel will be unbuffered.</p></td>
        </tr>

    
    </tbody>
</table>














<h5>Returns:</h5>

        
<div class="param-desc">
    <p>An array of two channels. The first is the destination channel with all
    of the values that passed the predicate, the second is the destination channel with all of the values that did
    not pass the predicate.</p>
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array.&lt;module:cispy/core~Channel></span>


    </dd>
</dl>

    


        
            

    

    <h4 class="name" id=".pipe"><span class="type-signature">(static) </span>pipe<span class="signature">(src, dest, keepOpen<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {<a href="module-cispy_channel-Channel.html">module:cispy/channel~Channel</a>}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="modules_utils_flow.js.html">modules/utils/flow.js</a>, <a href="modules_utils_flow.js.html#line90">line 90</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p><strong>Pipes the values from one channel onto another channel.</strong></p>
<p>This ties two channels together so that puts on the source channel can be taken off the destination channel. This
does not duplicate values in any way - if another process takes a value off the source channel, it will never appear
on the destination channel. In most cases you will not want to take values off a channel once it's piped to another
channel, since it's difficult to know which values will go to which channel.</p>
<p>Closing either channel will break the connection between the two. If the source channel is closed, the destination
channel will by default also be closed. However, passing <code>true</code> as the third parameter will cause the destination
channel to remain open even when the source channel is closed (the connection is still broken however).</p>
<p>Because of the ability to leave the destination channel open, a possible use case for this function is to wrap the
destination channel(s) of one of the other flow control functions below to have a channel that survives the source
channel closing. The rest of those functions (aside from the special-case
<code>tap</code>) automatically close their destination channels when the
source channels close.</p>
<pre class="prettyprint source"><code>const { go, chan, put, take, close, utils } = cispy;
const { pipe } = utils;

const input = chan();
const output = pipe(input, chan());

go(async () => {
  await put(input, 1);
  await put(input, 2);
  close(input);
});

go(async () => {
  console.log(await take(output));      // -> 1
  console.log(await take(output));      // -> 2
  console.log(output.closed);           // -> true
});</code></pre>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>src</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="module-cispy_channel-Channel.html">module:cispy/channel~Channel</a></span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last"><p>The source channel.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>dest</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="module-cispy_channel-Channel.html">module:cispy/channel~Channel</a></span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last"><p>The destination channel.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>keepOpen</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    <code>false</code>
                
                </td>
            

            <td class="description last"><p>A flag to indicate that the destination channel should be kept open after the
    source channel closes. By default the destination channel will close when the source channel closes.</p></td>
        </tr>

    
    </tbody>
</table>














<h5>Returns:</h5>

        
<div class="param-desc">
    <p>The destination channel.</p>
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="module-cispy_channel-Channel.html">module:cispy/channel~Channel</a></span>


    </dd>
</dl>

    


        
            

    

    <h4 class="name" id=".reduce"><span class="type-signature">(static) </span>reduce<span class="signature">(fn, ch, init)</span><span class="type-signature"> &rarr; {<a href="module-cispy_channel-Channel.html">module:cispy/channel~Channel</a>}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="modules_utils_conversion.js.html">modules/utils/conversion.js</a>, <a href="modules_utils_conversion.js.html#line74">line 74</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p><strong>Creates a single value from a channel by running its values through a reducing function.</strong></p>
<p>For every value put onto the input channel, the reducing function is called with two parameters: the accumulator that
holds the result of the reduction so far, and the new input value. The initial value of the accumulator is the third
parameter to <code>reduce</code>. The reduction is not complete until the input channel closes.</p>
<p>This function returns a channel. When the final reduced value is produced, it is put onto this channel, and when that
value is taken from it, the channel is closed.</p>
<pre class="prettyprint source"><code>const { go, chan, put, take, close, utils } = cispy;
const { reduce } = utils;

const input = chan();
const output = reduce((acc, value) => acc + value, input, 0);

go(async () => {
  await put(input, 1);
  await put(input, 2);
  await put(input, 3);
  close(input);
});

go(async () => {
  const result = await take(output);
  console.log(output);                  // -> 6
});
</code></pre><p>Note that the input channel <em>must</em> be closed at some point, or no value will ever appear on the output channel. The
closing of the channel is what signifies that the reduction should be completed.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>fn</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="module-cispy_utils.html#~reducer">module:cispy/utils~reducer</a></span>


            
            </td>

            

            

            <td class="description last"><p>The reducer function responsible for turning the series of channel
    values into a single output value.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>ch</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="module-cispy_channel-Channel.html">module:cispy/channel~Channel</a></span>


            
            </td>

            

            

            <td class="description last"><p>The channel whose values are being reduced into a single output value.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>init</code></td>
            

            <td class="type">
            
                
<span class="param-type">*</span>


            
            </td>

            

            

            <td class="description last"><p>The initial value to feed into the reducer function for the first reduction step.</p></td>
        </tr>

    
    </tbody>
</table>














<h5>Returns:</h5>

        
<div class="param-desc">
    <p>A channel that will, when the input channel closes, have the reduced
    value put into it. When this value is taken, the channel will automatically close.</p>
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="module-cispy_channel-Channel.html">module:cispy/channel~Channel</a></span>


    </dd>
</dl>

    


        
            

    

    <h4 class="name" id=".split"><span class="type-signature">(static) </span>split<span class="signature">(src, &hellip;buffers<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {Array.&lt;<a href="module-cispy_channel-Channel.html">module:cispy/channel~Channel</a>>}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="modules_utils_flow.js.html">modules/utils/flow.js</a>, <a href="modules_utils_flow.js.html#line303">line 303</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p><strong>Splits a single channel into multiple destination channels, with each destination channel receiving every value put
onto the source channel.</strong></p>
<p>Every parameter after the first represents the buffer from a single destination channel. Each <code>0</code> or <code>null</code> will
produce an unbuffered channel, while each positive integer will produce a channel buffered by a fixed buffer of that
size. Each buffer will produce a buffered channel backed by that buffer. If there are no parameters after the first,
then two unbuffered channels will be produced as a default.</p>
<p>When the source channel is closed, all destination channels will also be closed. However, if destination channels are
closed, they do nothing to the source channel.</p>
<pre class="prettyprint source"><code>const { go, chan, put, take, utils } = cispy;
const { split } = util;

const input = chan();
const outputs = split(input, 3);

go(async () => {
  await put(input, 1);
  await put(input, 2);
  await put(input, 3);
});

go(async () => {
  for (const output of outputs) {       // Each output will happen 3 times
    console.log(await take(output));    // -> 1
    console.log(await take(output));    // -> 2
    console.log(await take(output));    // -> 3
  }
});</code></pre><p>This function moves its values to the output channels asynchronously. This means that even when using unbuffered
channels, it is not necessary for all output channels to be taken from before the next put to the input channel can
complete.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>src</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="module-cispy_channel-Channel.html">module:cispy/channel~Channel</a></span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last"><p>The source channel.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>buffers</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>
|

<span class="param-type"><a href="module-cispy_buffers-Buffer.html">module:cispy/buffers~Buffer</a></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                    &lt;repeatable><br>
                
                </td>
            

            
                <td class="default">
                
                    <code>2</code>
                
                </td>
            

            <td class="description last"><p>The buffers used to create the destination
    channels. Each entry is treated separately. If one is a number, then a
    <a href="module-cispy_buffers-FixedBuffer.html">FixedBuffer</a> of that size will be used. If one is a <code>0</code>, then the
    corresponding channel will be unbuffered. <strong>Exception:</strong> if a single number is passed, then that number of
    unbuferred channels will be created. This means that the default is to create two unbuffered channels. To create
    a single channel with a fixed buffer, use <code>fixedBuffer</code> explicitly.</p></td>
        </tr>

    
    </tbody>
</table>














<h5>Returns:</h5>

        
<div class="param-desc">
    <p>An array of destination channels.</p>
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array.&lt;<a href="module-cispy_channel-Channel.html">module:cispy/channel~Channel</a>></span>


    </dd>
</dl>

    


        
            

    

    <h4 class="name" id=".tap"><span class="type-signature">(static) </span>tap<span class="signature">(src, dest<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {<a href="module-cispy_channel-Channel.html">module:cispy/channel~Channel</a>}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="modules_utils_flow.js.html">modules/utils/flow.js</a>, <a href="modules_utils_flow.js.html#line437">line 437</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p><strong>Taps a channel, sending all of the values put onto it to the destination channel.</strong></p>
<p>A source channel can be tapped multiple times, and all of the tapping (destination) channels receive each value put
onto the tapped (source) channel.</p>
<p>This is different from <code><a href="module-cispy_utils-CispyUtils.html#.split">split</a></code> in that it's temporary. Channels
can tap a channel and then untap it, multiple times, as needed. If a source channel has all of its taps removed, then
it reverts to a normal channel, just as it was before it was tapped.</p>
<p>Also unlike <code><a href="module-cispy_utils-CispyUtils.html#.split">split</a></code>, each call can only tap once. For multiple
channels to tap a source channel, <code>tap</code> has to be called multiple times.</p>
<p>Closing either the source or any of the destination channels has no effect on any of the other channels.</p>
<pre class="prettyprint source"><code>const { go, chan, put, take, utils } = cispy;
const { tap } = utils;

const input = chan();
const tapper = chan();
tap(input, tapper);

go(async () => {
  await put(input, 1);
  await put(input, 2);
});

go(async () => {
  console.log(await take(tapper));   // -> 1
  console.log(await take(tapper));   // -> 2
});
</code></pre>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>src</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="module-cispy_channel-Channel.html">module:cispy/channel~Channel</a></span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"><p>The channel to be tapped.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>dest</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="module-cispy_channel-Channel.html">module:cispy/channel~Channel</a></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>The channel tapping the source channel. If this is not present,
    a new unbuffered channel will be created.</p></td>
        </tr>

    
    </tbody>
</table>














<h5>Returns:</h5>

        
<div class="param-desc">
    <p>The destination channel. This is the same as the second argument, if
    present; otherwise it is the newly-created channel tapping the source channel.</p>
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="module-cispy_channel-Channel.html">module:cispy/channel~Channel</a></span>


    </dd>
</dl>

    


        
            

    

    <h4 class="name" id=".throttle"><span class="type-signature">(static) </span>throttle<span class="signature">(src, buffer<span class="signature-attributes">opt</span>, delay, options<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {<a href="module-cispy_channel-Channel.html">module:cispy/channel~Channel</a>}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="modules_utils_timing.js.html">modules/utils/timing.js</a>, <a href="modules_utils_timing.js.html#line190">line 190</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p><strong>Throttles an input channel.</strong></p>
<p>Throttling is the act of ensuring that something only happens once per time interval. In this case, it means that a
value put onto the source channel is only made available to the destination channel once per a given number of
milliseconds. An example usage would be with window scroll events; these events are nearly continuous as scrolling is
happening, and perhaps we don't want to call an expensive UI updating function every time a scroll event is fired. We
can throttle the input channel and make it only offer up the scroll events once every 100 milliseconds, for instance.</p>
<p>Throttling is effected by creating a new channel as a throttled destination for values put onto the source channel.
Values will only appear on that destination channel once per delay interval; other values that are put onto the
source channel in the meantime are discarded.</p>
<p>The <code>delay</code> parameter controls how often a value can become available on the destination channel. When the first
value is put onto the source channel, it is immediately put onto the destination channel as well and the delay
begins. Any further values put onto the source channel during that delay are <em>not</em> passed through; only when the
delay expires is the last input value made available on the destination channel. The delay then begins again, so that
further inputs are squelched until <em>that</em> delay passes. Throttling continues, only allowing one value through per
interval, until an entire interval passes without input.</p>
<p>This behavior can be modified by three options: <code>leading</code>, <code>trailing</code>, and <code>cancel</code>.</p>
<p>If both <code>leading</code> and <code>trailing</code> are <code>true</code>, values will not be duplicated. The first value put onto the source
channel will be put onto the destination channel immediately (per <code>leading</code>) and the delay will begin, but a value
will only be made available on the destination channel at the end of the delay (per <code>trailing</code>) if <em>another</em> input
value was put onto the source channel before the delay expired.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>src</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="module-cispy_channel-Channel.html">module:cispy/channel~Channel</a></span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last"><p>The source channel.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>buffer</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>
|

<span class="param-type"><a href="module-cispy_buffers-Buffer.html">module:cispy/buffers~Buffer</a></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    <code>0</code>
                
                </td>
            

            <td class="description last"><p>A buffer used to create the destination channel. If
    this is a number, a <a href="module-cispy_buffers-FixedBuffer.html">FixedBuffer</a> of that size will be used. If this is
    <code>0</code> or not present, the channel will be unbuffered.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>delay</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last"><p>The throttling delay, in milliseconds.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>options</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    <code>{}</code>
                
                </td>
            

            <td class="description last"><p>A set of options to further configure the throttling.</p>
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>leading</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    <code>true</code>
                
                </td>
            

            <td class="description last"><p>Makes the value that triggered the throttling immediately available on the
    destination channel before beginning the delay. If this is <code>false</code>, the first value will not be put onto the
    destination channel until a full delay interval passes.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>trailing</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    <code>true</code>
                
                </td>
            

            <td class="description last"><p>Makes the last value put onto the source channel available on the
    destination channel when the delay expires. If this is <code>false</code>, any inputs that come in during the delay are
    ignored, and the next value is not put onto the destination channel until the first input <em>after</em> the delay
    expires.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>cancel</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="module-cispy_channel-Channel.html">module:cispy/channel~Channel</a></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last"><p>A channel used to signal a cancellation of the
    throttling. Any value put onto this channel will cancel the current throttling operation, closing the output
    channel and discarding any values that were waiting for the throttle threshold timer to be sent to the output.</p></td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>














<h5>Returns:</h5>

        
<div class="param-desc">
    <p>} The newly-created destination channel, where all of the values will be
    throttled from the source channel.</p>
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="module-cispy_channel-Channel.html">module:cispy/channel~Channel</a></span>


    </dd>
</dl>

    


        
            

    

    <h4 class="name" id=".untap"><span class="type-signature">(static) </span>untap<span class="signature">(src, dest)</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="modules_utils_flow.js.html">modules/utils/flow.js</a>, <a href="modules_utils_flow.js.html#line462">line 462</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p><strong>Untaps a previously tapping destination channel from its source channel.</strong></p>
<p>This removes a previously created tap. The destination (tapping) channel will stop receiving the values put onto the
source channel.</p>
<p>If the destination channel was not, in fact, tapping the source channel, this function will do nothing. If all taps
are removed, the source channel reverts to normal (i.e., it no longer has the tapping code applied to it and can be
taken from as normal).</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>src</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="module-cispy_channel-Channel.html">module:cispy/channel~Channel</a></span>


            
            </td>

            

            

            <td class="description last"><p>The tapped channel.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>dest</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="module-cispy_channel-Channel.html">module:cispy/channel~Channel</a></span>


            
            </td>

            

            

            <td class="description last"><p>The channel that is tapping the source channel that should no longer
    be tapping the source channel.</p></td>
        </tr>

    
    </tbody>
</table>
















        
            

    

    <h4 class="name" id=".untapAll"><span class="type-signature">(static) </span>untapAll<span class="signature">(src)</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="modules_utils_flow.js.html">modules/utils/flow.js</a>, <a href="modules_utils_flow.js.html#line484">line 484</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p><strong>Removes all taps from a source channel.</strong></p>
<p>The previously-tapped channel reverts to a normal channel, while any channels that might have been tapping it no
longer receive values from the source channel. If the source channel had no taps, this function does nothing.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>src</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="module-cispy_channel-Channel.html">module:cispy/channel~Channel</a></span>


            
            </td>

            

            

            <td class="description last"><p>The tapped channel. All taps will be removed from this channel.</p></td>
        </tr>

    
    </tbody>
</table>
















        
    

    

    
</article>

</section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>


</body>
</html>