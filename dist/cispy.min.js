/*!
 * Copyright (c) 2017-2018 Thomas Otterson
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy of
 * this software and associated documentation files (the "Software"), to deal in
 * the Software without restriction, including without limitation the rights to
 * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
 * the Software, and to permit persons to whom the Software is furnished to do so,
 * subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
 * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
 * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
 * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
 * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * 
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.cispy=e():t.cispy=e()}(window,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=8)}([function(t,e,n){var r,o=n(9),i=n(2),a=i.queue,u=i.fixed,c=i.EMPTY,s=n(5).dispatch,f=n(13).protocols,l=64,p=1024,h=Symbol(),v=Symbol("CLOSED"),d=Symbol("DEFAULT");function m(t){return!(!t||!t[f.reduced])}function y(t){return{value:t,box:h}}function g(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=r.maxDirty,i=void 0===o?l:o,u=r.maxQueued,d=void 0===u?p:u,g=a(),b=a(),x=0,w=0,k=!1;return{get closed(){return k},get buffered(){return!!t},get timeout(){return!!n},put:function(n,r){if(n===v)throw Error("Cannot put CLOSED on a channel");if(k)return r.commit(),y(!1);var o,a;if(t&&!t.full){r.commit();for(var u=m(e[f.step](t,n));0!==t.count&&(o=g.dequeue())!==c;)o.active&&function(){a=o.commit();var e=t.remove();a&&s(function(){return a(e)})}();return u&&this.close(),y(!0)}for(;(o=g.dequeue())!==c;)if(o.active)return r.commit(),(a=o.commit())&&s(function(){return a(n)}),y(!0);if(w>i?(b.filter(function(t){return t.handler.active}),w=0):w++,b.count>=d)throw Error("No more than ".concat(d," pending puts are allowed on a single channel"));return b.enqueue(function(t,e){return{handler:t,value:e,box:h}}(r,n)),null},take:function(n){var r,o,a;if(t&&t.count>0){n.commit();for(var u=t.remove();!t.full&&(r=b.dequeue())!==c;)(o=r.handler).active&&((a=o.commit())&&s(function(){return a(!0)}),m(e[f.step](t,r.value))&&this.close());return y(u)}for(;(r=b.dequeue())!==c;)if((o=r.handler).active)return(a=o.commit())&&s(function(){return a(!0)}),y(r.value);if(k)return n.commit(),y(v);if(x>i?(g.filter(function(t){return t.active}),x=0):x++,g.count>=d)throw Error("No more than ".concat(d," pending takes are allowed on a single channel"));return g.enqueue(n),null},close:function(){if(!k){var n,r,o;if(k=!0,t)for(e[f.result](t);0!==t.count&&(n=g.dequeue())!==c;)n.active&&function(){o=n.commit();var e=t.remove();o&&s(function(){return o(e)})}();for(;(n=g.dequeue())!==c;)n.active&&(o=n.commit())&&s(function(){return o(v)});for(;(r=b.dequeue())!==c;)r.handler.active&&(o=r.handler.commit())&&s(function(){return o(!1)})}}}}var b=function(){return v};function x(t,e,n){var r=e(n);return r!==v&&t.add(r),t}function w(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b;return o(e={},f.step,function(e,r){try{return t[f.step](e,r)}catch(t){return x(e,n,t)}}),o(e,f.result,function(e){try{return t[f.result](e)}catch(t){return x(e,n,t)}}),e}var k=(o(r={},f.init,function(){throw Error("init not available")}),o(r,f.step,function(t,e){return t.add(e),t}),o(r,f.result,function(t){return t}),r);function E(t){t.close()}t.exports={CLOSED:v,DEFAULT:d,box:y,isBox:function(t){return t&&t.box===h},chan:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=0===t?null:t,i="number"==typeof o?u(o):o;if(e&&!i)throw Error("Only buffered channels can use transformers");return g(i,w(e?e(k):k,n),!1,r)},timeout:function(t){var e=g(null,w(k),!0);return setTimeout(function(){return E(e)},t),e},close:E}},function(t,e,n){var r=n(7),o=n(0),i=o.box,a=o.isBox,u=o.chan,c=o.DEFAULT;function s(t){return{get active(){return!0},commit:function(){return t}}}function f(t,e,n){var o=t.length;if(0===o)throw Error("Alts called with no operations");var u,s=!!n.priority,f=s?[]:function(t){for(var e=[],n=0;n<t;++n)e.push(n);for(var r=t-1;r>0;--r){var o=Math.floor(Math.random()*(r+1)),i=e[r];e[r]=e[o],e[o]=i}return e}(o),l=i(!0);function p(t){return function(t,e){return{get active(){return t.value},commit:function(){return t.value=!1,e}}}(l,function(n){e({value:n,channel:t})})}for(var h=0;h<o;++h){var v=t[s?h:f[h]],d=void 0,m=void 0;if(Array.isArray(v)){var y=r(v,2);d=y[0],m=y[1],u=d.put(m,p(d))}else u=(d=v).take(p(d));if(a(u)){e({value:u.value,channel:d});break}}!a(u)&&n.hasOwnProperty("default")&&l.value&&(l.value=!1,e({value:n.default,channel:c}))}function l(t,e,n){var r=t.put(e,s(n));r&&n&&n(r.value)}function p(t,e){var n=t.take(s(e));n&&e&&e(n.value)}t.exports={altsAsync:f,putAsync:l,takeAsync:p,put:function(t,e){return new Promise(function(n){l(t,e,n)})},take:function(t){return new Promise(function(e){p(t,e)})},takeOrThrow:function(t){return new Promise(function(e,n){p(t,function(t){Error.prototype.isPrototypeOf(t)?n(t):e(t)})})},alts:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(n){f(t,n,e)})},sleep:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise(function(e){if(0===t)setTimeout(e,0);else{var n=u();setTimeout(function(){return n.close()},t),p(n,e)}})},go:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.apply(void 0,n)}}},function(t,e){var n=Symbol("EMPTY");function r(){return{store:[],pointer:0,get count(){return this.store.length-this.pointer},get empty(){return 0===this.store.length},enqueue:function(t){this.store.push(t)},dequeue:function(){if(this.empty)return n;var t=this.store[this.pointer];return 2*++this.pointer>=this.store.length&&(this.store=this.store.slice(this.pointer),this.pointer=0),t},peek:function(){return this.empty?n:this.store[this.pointer]},filter:function(t){for(var e=0,n=this.count;e<n;++e){var r=this.dequeue();t(r)&&this.enqueue(r)}}}}function o(t){var e=r();return{get queue(){return e},get size(){return t},get count(){return this.queue.count},remove:function(){return this.queue.dequeue()}}}t.exports={EMPTY:n,queue:r,fixed:function(t){return Object.assign(Object.create(o(t),{full:{get:function(){return this.queue.count>=this.size}}}),{add:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0;r<e.length;r++){var o=e[r];this.queue.enqueue(o)}}})},dropping:function(t){return Object.assign(Object.create(o(t),{full:{get:function(){return!1}}}),{add:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0;r<e.length;r++){var o=e[r];this.queue.count<this.size&&this.queue.enqueue(o)}}})},sliding:function(t){return Object.assign(Object.create(o(t),{full:{get:function(){return!1}}}),{add:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0;r<e.length;r++){var o=e[r];this.queue.count===this.size&&this.queue.dequeue(),this.queue.enqueue(o)}}})}}},function(t,e,n){t.exports=n(19)},function(t,e){function n(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}t.exports=function(t){return function(){var e=this,r=arguments;return new Promise(function(o,i){var a=t.apply(e,r);function u(t){n(a,o,i,u,c,"next",t)}function c(t){n(a,o,i,u,c,"throw",t)}u(void 0)})}}},function(t,e,n){(function(e){var r=n(2),o=r.queue(),i=r.EMPTY,a=Symbol("SET_IMMEDIATE"),u=Symbol("MESSAGE_CHANNEL"),c=Symbol("SET_TIMEOUT"),s={batchSize:1024,dispatchMethod:a},f=h();var l=!1,p=!1;function h(){switch(function(){switch(s.dispatchMethod){case u:return"undefined"!=typeof MessageChannel?u:c;case c:return c;default:return void 0!==e?a:"undefined"!=typeof MessageChannel?u:c}}()){case a:return function(){p&&l||(p=!0,e(v))};case u:var t=new MessageChannel;return t.port1.onmessage=function(){return v()},function(){p&&l||(p=!0,t.port2.postMessage(0))};case c:return function(){p&&l||(p=!0,setTimeout(v,0))}}}function v(){l=!0,p=!1;for(var t=0;;){var e=o.dequeue();if(e===i)break;if(e(),t>=s.taskBatchSize)break;t++}l=!1,o.length&&f()}t.exports={config:function(t){for(var e in s)t.hasOwnProperty(e)&&(s[e]=t[e],"dispatchMethod"===e&&(f=h()))},dispatch:function(t){o.enqueue(t),f()},SET_IMMEDIATE:a,MESSAGE_CHANNEL:u,SET_TIMEOUT:c}}).call(this,n(10).setImmediate)},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r=n(14),o=n(15),i=n(16);t.exports=function(t,e){return r(t)||o(t,e)||i()}},function(t,e,n){var r=n(2),o=r.fixed,i=r.sliding,a=r.dropping,u=r.EMPTY,c=n(0),s=c.chan,f=c.timeout,l=c.close,p=c.CLOSED,h=c.DEFAULT,v=n(1),d=v.putAsync,m=v.takeAsync,y=v.altsAsync,g=v.put,b=v.take,x=v.takeOrThrow,w=v.alts,k=v.sleep,E=v.go,T=n(5),O=T.config,S=T.SET_IMMEDIATE,A=T.MESSAGE_CHANNEL,L=T.SET_TIMEOUT,_=n(17);t.exports={go:E,put:g,take:b,takeOrThrow:x,alts:w,sleep:k,chan:s,timeout:f,close:l,putAsync:d,takeAsync:m,altsAsync:y,config:O,fixedBuffer:o,slidingBuffer:i,droppingBuffer:a,CLOSED:p,DEFAULT:h,EMPTY:u,SET_IMMEDIATE:S,MESSAGE_CHANNEL:A,SET_TIMEOUT:L,utils:_}},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e,n){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function i(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new i(o.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new i(o.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(11),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(6))},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,o=1,i={},a=!1,u=t.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(t);c=c&&c.setTimeout?c:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick(function(){f(t)})}:function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?function(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&f(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),r=function(n){t.postMessage(e+n,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){f(t.data)},r=function(e){t.port2.postMessage(e)}}():u&&"onreadystatechange"in u.createElement("script")?function(){var t=u.documentElement;r=function(e){var n=u.createElement("script");n.onreadystatechange=function(){f(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}():r=function(t){setTimeout(f,0,t)},c.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var a={callback:t,args:e};return i[o]=a,r(o),o++},c.clearImmediate=s}function s(t){delete i[t]}function f(t){if(a)setTimeout(f,0,t);else{var e=i[t];if(e){a=!0;try{!function(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}(e)}finally{s(t),a=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(6),n(12))},function(t,e){var n,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var c,s=[],f=!1,l=-1;function p(){f&&c&&(f=!1,c.length?s=c.concat(s):l=-1,s.length&&h())}function h(){if(!f){var t=u(p);f=!0;for(var e=s.length;e;){for(c=s,s=[];++l<e;)c&&c[l].run();l=-1,e=s.length}c=null,f=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function v(t,e){this.fun=t,this.array=e}function d(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new v(t,e)),1!==s.length||f||u(h)},v.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=d,o.addListener=d,o.once=d,o.off=d,o.removeListener=d,o.removeAllListeners=d,o.emit=d,o.prependListener=d,o.prependOnceListener=d,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e){var n=!0,r="undefined"!=typeof Symbol;function o(t){return n&&r?Symbol.for(t):"@@".concat(t)}var i={iterator:r?Symbol.iterator:"@@iterator",init:o("transducer/init"),step:o("transducer/step"),result:o("transducer/result")};t.exports={protocols:i}},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(t,e,n){var r=n(18),o=n(21),i=n(26);t.exports=Object.assign({},r,o,i)},function(t,e,n){var r=n(7),o=n(3),i=n(4),a=n(0),u=a.chan,c=a.close,s=a.CLOSED,f=n(1),l=f.put,p=f.take,h=f.putAsync;function v(t,e,n){var r=u();function a(){return(a=i(o.mark(function i(){var a,u;return o.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:a=n;case 1:return o.next=3,p(e);case 3:if((u=o.sent)!==s){o.next=7;break}return h(r,a,function(){return c(r)}),o.abrupt("return");case 7:a=t(a,u);case 8:o.next=1;break;case 10:case"end":return o.stop()}},i,this)}))).apply(this,arguments)}return function(){a.apply(this,arguments)}(),r}t.exports={reduce:v,onto:function(t,e){var n=Array.isArray(t)?[u(t.length),t]:[t,e],a=r(n,2),s=a[0],f=a[1];function p(){return(p=i(o.mark(function t(){var e,n,r,i,a,u;return o.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=!0,n=!1,r=void 0,t.prev=3,i=f[Symbol.iterator]();case 5:if(e=(a=i.next()).done){t.next=12;break}return u=a.value,t.next=9,l(s,u);case 9:e=!0,t.next=5;break;case 12:t.next=18;break;case 14:t.prev=14,t.t0=t.catch(3),n=!0,r=t.t0;case 18:t.prev=18,t.prev=19,e||null==i.return||i.return();case 21:if(t.prev=21,!n){t.next=24;break}throw r;case 24:return t.finish(21);case 25:return t.finish(18);case 26:c(s);case 27:case"end":return t.stop()}},t,this,[[3,14,18,26],[19,,21,25]])}))).apply(this,arguments)}return function(){p.apply(this,arguments)}(),s},into:function(t,e){var n=Array.isArray(t)?[t,e]:[[],t],o=r(n,2),i=o[0];return v(function(t,e){return t.push(e),t},o[1],i.slice())}}},function(t,e,n){var r=function(){return this||"object"==typeof self&&self}()||Function("return this")(),o=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,i=o&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,t.exports=n(20),o)r.regeneratorRuntime=i;else try{delete r.regeneratorRuntime}catch(t){r.regeneratorRuntime=void 0}},function(t,e){!function(e){"use strict";var n,r=Object.prototype,o=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag",s="object"==typeof t,f=e.regeneratorRuntime;if(f)s&&(t.exports=f);else{(f=e.regeneratorRuntime=s?t.exports:{}).wrap=x;var l="suspendedStart",p="suspendedYield",h="executing",v="completed",d={},m={};m[a]=function(){return this};var y=Object.getPrototypeOf,g=y&&y(y(M([])));g&&g!==r&&o.call(g,a)&&(m=g);var b=T.prototype=k.prototype=Object.create(m);E.prototype=b.constructor=T,T.constructor=E,T[c]=E.displayName="GeneratorFunction",f.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===E||"GeneratorFunction"===(e.displayName||e.name))},f.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,T):(t.__proto__=T,c in t||(t[c]="GeneratorFunction")),t.prototype=Object.create(b),t},f.awrap=function(t){return{__await:t}},O(S.prototype),S.prototype[u]=function(){return this},f.AsyncIterator=S,f.async=function(t,e,n,r){var o=new S(x(t,e,n,r));return f.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},O(b),b[c]="Generator",b[a]=function(){return this},b.toString=function(){return"[object Generator]"},f.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},f.values=M,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,o){return u.type="throw",u.arg=t,e.next=r,o&&(e.method="next",e.arg=n),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=o.call(a,"catchLoc"),s=o.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:M(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=n),d}}}function x(t,e,n,r){var o=e&&e.prototype instanceof k?e:k,i=Object.create(o.prototype),a=new j(r||[]);return i._invoke=function(t,e,n){var r=l;return function(o,i){if(r===h)throw new Error("Generator is already running");if(r===v){if("throw"===o)throw i;return I()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=A(a,n);if(u){if(u===d)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===l)throw r=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var c=w(t,e,n);if("normal"===c.type){if(r=n.done?v:p,c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=v,n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function w(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function k(){}function E(){}function T(){}function O(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function S(t){var e;this._invoke=function(n,r){function i(){return new Promise(function(e,i){!function e(n,r,i,a){var u=w(t[n],t,r);if("throw"!==u.type){var c=u.arg,s=c.value;return s&&"object"==typeof s&&o.call(s,"__await")?Promise.resolve(s.__await).then(function(t){e("next",t,i,a)},function(t){e("throw",t,i,a)}):Promise.resolve(s).then(function(t){c.value=t,i(c)},function(t){return e("throw",t,i,a)})}a(u.arg)}(n,r,e,i)})}return e=e?e.then(i,i):i()}}function A(t,e){var r=t.iterator[e.method];if(r===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=n,A(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var o=w(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,d;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function M(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(o.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=n,e.done=!0,e};return i.next=i}}return{next:I}}function I(){return{value:n,done:!0}}}(function(){return this||"object"==typeof self&&self}()||Function("return this")())},function(t,e,n){var r=n(22),o=n(3),i=n(4),a=n(0),u=a.chan,c=a.close,s=a.CLOSED,f=n(1),l=f.put,p=f.take,h=f.alts,v=f.putAsync,d=f.takeAsync,m={taps:Symbol("multitap/taps")};t.exports={pipe:function(t,e,n){function r(){return(r=i(o.mark(function r(){var i;return o.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,p(t);case 2:if((i=r.sent)!==s){r.next=6;break}return n||c(e),r.abrupt("break",12);case 6:return r.next=8,l(e,i);case 8:if(r.sent){r.next=10;break}return r.abrupt("break",12);case 10:r.next=0;break;case 12:case"end":return r.stop()}},r,this)}))).apply(this,arguments)}return function(){r.apply(this,arguments)}(),e},partition:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=u(n),f=u(r);function h(){return(h=i(o.mark(function n(){var r;return o.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,p(e);case 2:if((r=n.sent)!==s){n.next=7;break}return c(a),c(f),n.abrupt("break",11);case 7:return n.next=9,l(t(r)?a:f,r);case 9:n.next=0;break;case 11:case"end":return n.stop()}},n,this)}))).apply(this,arguments)}return function(){h.apply(this,arguments)}(),[a,f]},merge:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=u(e),r=t.slice();function a(){return(a=i(o.mark(function t(){var e,i,a,u;return o.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==r.length){t.next=2;break}return t.abrupt("break",15);case 2:return t.next=4,h(r);case 4:if(e=t.sent,i=e.value,a=e.channel,i!==s){t.next=11;break}return u=r.indexOf(a),r.splice(u,1),t.abrupt("continue",13);case 11:return t.next=13,l(n,i);case 13:t.next=0;break;case 15:c(n);case 16:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}return function(){a.apply(this,arguments)}(),n},split:function(t){for(var e=[],n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];var f=0===r.length?[2]:r;if(1===f.length&&function(t){return"[object Number]"===Object.prototype.toString.call(t)&&isFinite(t)}(f[0])){var l=f[0];f=[];for(var h=0;h<l;++h)f.push(0)}for(var d=0;d<f.length;d++){var m=f[d];e.push(u(m))}var y=u(),g=0;function b(){0==--g&&v(y)}function x(){return(x=i(o.mark(function n(){var r,i,a,u,f;return o.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,p(t);case 2:if((r=n.sent)!==s){n.next=6;break}for(i=0;i<e.length;i++)a=e[i],c(a);return n.abrupt("break",12);case 6:for(g=e.length,u=0;u<e.length;u++)f=e[u],v(f,r,b);return n.next=10,p(y);case 10:n.next=0;break;case 12:case"end":return n.stop()}},n,this)}))).apply(this,arguments)}return function(){x.apply(this,arguments)}(),e},tap:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u();return t[m.taps]||function(t){Object.defineProperty(t,m.taps,{configurable:!0,writable:!0,value:[]});var e=u(),n=0;function r(){0==--n&&v(e)}function a(){return(a=i(o.mark(function i(){var a,u,c,f,l,h,d;return o.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,p(t);case 2:if((a=o.sent)!==s&&0!==t[m.taps].length){o.next=6;break}return delete t[m.taps],o.abrupt("break",30);case 6:for(n=t[m.taps].length,u=!0,c=!1,f=void 0,o.prev=10,l=t[m.taps][Symbol.iterator]();!(u=(h=l.next()).done);u=!0)d=h.value,v(d,a,r);o.next=18;break;case 14:o.prev=14,o.t0=o.catch(10),c=!0,f=o.t0;case 18:o.prev=18,o.prev=19,u||null==l.return||l.return();case 21:if(o.prev=21,!c){o.next=24;break}throw f;case 24:return o.finish(21);case 25:return o.finish(18);case 26:return o.next=28,p(e);case 28:o.next=0;break;case 30:case"end":return o.stop()}},i,this,[[10,14,18,26],[19,,21,25]])}))).apply(this,arguments)}!function(){a.apply(this,arguments)}()}(t),~t[m.taps].indexOf(e)||t[m.taps].push(e),e},untap:function(t,e){var n=t[m.taps];if(n){var r=n.indexOf(e);-1!==r&&(n.splice(r,1),0===n.length&&v(t))}},untapAll:function(t){t[m.taps]&&(t[m.taps]=[],v(t))},map:function(t,e){for(var n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,f=u(a),h=e.length,m=[],y=[],g=u(),b=0;b<h;++b)y[b]=function(t){return function(e){m[t]=e,0==--n&&v(g,m.slice())}}(b);function x(){return(x=i(o.mark(function i(){var a,u,v,m,b,x,w;return o.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:for(n=h,a=0;a<h;++a)d(e[a],y[a]);return o.next=4,p(g);case 4:u=o.sent,v=!0,m=!1,b=void 0,o.prev=8,x=u[Symbol.iterator]();case 10:if(v=(w=x.next()).done){o.next=18;break}if(w.value!==s){o.next=15;break}return c(f),o.abrupt("return");case 15:v=!0,o.next=10;break;case 18:o.next=24;break;case 20:o.prev=20,o.t0=o.catch(8),m=!0,b=o.t0;case 24:o.prev=24,o.prev=25,v||null==x.return||x.return();case 27:if(o.prev=27,!m){o.next=30;break}throw b;case 30:return o.finish(27);case 31:return o.finish(24);case 32:return o.next=34,l(f,t.apply(void 0,r(u)));case 34:o.next=0;break;case 36:case"end":return o.stop()}},i,this,[[8,20,24,32],[25,,27,31]])}))).apply(this,arguments)}return function(){x.apply(this,arguments)}(),f}}},function(t,e,n){var r=n(23),o=n(24),i=n(25);t.exports=function(t){return r(t)||o(t)||i()}},function(t,e){t.exports=function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}},function(t,e){t.exports=function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(t,e,n){var r=n(3),o=n(4),i=n(0),a=i.chan,u=i.timeout,c=i.close,s=i.CLOSED,f=n(1),l=f.put,p=f.alts;function h(t){return"[object Number]"===Object.prototype.toString.call(t)&&isFinite(t)}t.exports={debounce:function(t,e,n,i){var f={leading:!1,trailing:!0,maxDelay:0,cancel:a()},v=h(n)?e:0,d=h(n)?n:e,m=Object.assign(f,(h(n)?i:n)||{}),y=a(v),g=m.leading,b=m.trailing,x=m.maxDelay,w=m.cancel;function k(){return(k=o(r.mark(function e(){var n,o,i,f,h,v,m;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=a(),o=a(),i=s;case 3:return e.next=5,p([t,n,o,w]);case 5:if(f=e.sent,h=f.value,(v=f.channel)!==w){e.next=11;break}return c(y),e.abrupt("break",38);case 11:if(v!==t){e.next=30;break}if(h!==s){e.next=15;break}return c(y),e.abrupt("break",38);case 15:if(m=n.timeout,n=u(d),!m&&x>0&&(o=u(x)),!g){e.next=27;break}if(m){e.next=24;break}return e.next=22,l(y,h);case 22:e.next=25;break;case 24:i=h;case 25:e.next=28;break;case 27:b&&(i=h);case 28:e.next=36;break;case 30:if(n=a(),o=a(),!b||i===s){e.next=36;break}return e.next=35,l(y,i);case 35:i=s;case 36:e.next=3;break;case 38:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}return function(){k.apply(this,arguments)}(),y},throttle:function(t,e,n,i){var f={leading:!0,trailing:!0,cancel:a()},v=h(n)?e:0,d=h(n)?n:e,m=Object.assign(f,(h(n)?i:n)||{}),y=a(v),g=m.leading,b=m.trailing,x=m.cancel;function w(){return(w=o(r.mark(function e(){var n,o,i,f,h,v;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=a(),o=s;case 2:return e.next=4,p([t,n,x]);case 4:if(i=e.sent,f=i.value,(h=i.channel)!==x){e.next=12;break}return c(y),e.abrupt("break",40);case 12:if(h!==t){e.next=30;break}if(f!==s){e.next=16;break}return c(y),e.abrupt("break",40);case 16:if((v=n.timeout)||(n=u(d)),!g){e.next=27;break}if(v){e.next=24;break}return e.next=22,l(y,f);case 22:e.next=25;break;case 24:b&&(o=f);case 25:e.next=28;break;case 27:b&&(o=f);case 28:e.next=38;break;case 30:if(!b||o===s){e.next=37;break}return n=u(d),e.next=34,l(y,o);case 34:o=s,e.next=38;break;case 37:n=a();case 38:e.next=2;break;case 40:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}return function(){w.apply(this,arguments)}(),y}}}])});